{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=chevron_left,chevron_right" />
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block content %}
    {% if spotlight %}
    <section class="hero-section">
        <div class="hero-slider">
            {% for anime in spotlight.results %}
            <div class="hero-slide {% if loop.index == 1 %}active{% endif %}" data-index="{{ loop.index0 }}">
                <img src="{{ anime.banner }}" alt="{{ anime.title }}" class="hero-background">
                <div class="hero-gradient"></div>
                <div class="hero-content">
                    <!-- <div class="hero-badge">
                        Spotlight
                    </div> -->
                    <h1 class="hero-title">{{ anime.title }}</h1>
                    <div class="hero-meta">
                        <span class="meta-badge sub"><i class="fa-solid fa-closed-captioning"></i> {{ anime.sub }}</span>
                        {% if anime.dub %}<span class="meta-badge dub"><i class="fa-solid fa-microphone"></i> {{ anime.dub }}</span>{% endif%}
                        <span>{{ anime.releaseDate or 'N/A' }}</span>
                        <span>{{ anime.type or 'TV' }}</span>
                    </div>
                    <p class="hero-description">
                        {{ anime.description or 'The inhabitants of a certain wealthy town fear nothing of knowing citizens crime. However, their world is proposed to a task in existence of the former status besides the complete warnings from his aids come later during the inhabitants of other things from his ever changing.' }}
                    </p>
                    <div class="hero-buttons">
                        <a href="/watch/{{ anime.id }}" class="hero-btn hero-btn-primary">
                            WATCH NOW
                        </a>
                        <a href="/anime/{{ anime.id }}" class="hero-btn hero-btn-secondary">
                            DETAILS
                        </a>
                        <a href="/watch/{{ anime.id }}" class="hero-btn-icon hero-btn-primary">
                            <i class="fa-solid fa-play"></i>
                        </a>
                        <a href="/anime/{{ anime.id }}" class="hero-btn-icon hero-btn-secondary">
                            <i class="fa-solid fa-info"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="hero-nav">
            <span class="hero-counter"><span id="currentSlide">1</span> / {{ spotlight.results|length }}</span>
            <button class="hero-nav-btn" onclick="changeSlide(-1)"><span class="material-symbols-outlined">chevron_left</span></button>
            <button class="hero-nav-btn" onclick="changeSlide(1)"><span class="material-symbols-outlined">chevron_right</span></button>
        </div>
    </section>
    {% endif %}
    
    <div class="info-box container">
        This is a side project not actual anime website. Thank you!
    </div>
    
    <div class="container">
        {% if recent_episodes %}
        <div class="section-header">
            <h2 class="section-title">Latest Updates</h2>
            <div class="tabs">
                <button class="tab active">All</button>
                <button class="tab">Sub</button>
                <button class="tab">Dub</button>
                <!-- <button class="tab">China</button> -->
            </div>
        </div>
        
        <div class="anime-grid">
            {% for anime in recent_episodes.results[:18] %}
            <a href="/anime/{{ anime.id }}" style="text-decoration: none; color: inherit;">
                <div class="anime-card">
                    {% if anime.type == 'TV' %}<div class="episode-number">EP {{ anime.episodes or '?' }}</div>{%endif%}
                    <img src="{{ anime.image }}" alt="{{ anime.title }}">
                    <div class="anime-card-content">
                        <h3>{{ anime.title }}</h3>
                        <div class="anime-meta">
                            <span class="meta-badge sub"><i class="fa-solid fa-closed-captioning"></i>{{ anime.sub }}</span>
                            {% if anime.dub %}<span class="meta-badge dub"><i class="fa-solid fa-microphone"></i>{{ anime.dub }}</span>{% endif %}
                            {% if anime.type %}
                            <span class="meta-badge">{{ anime.type }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <div class="container releases-section">
        <div class="releases-grid">
            <div class="release-column">
                <h3>New Releases</h3>
                <div class="release-list">
                    {% if new_releases and new_releases.results %}
                        {% for anime in new_releases.results[:8] %}
                        <a href="/anime/{{ anime.id }}" class="release-item">
                            <img src="{{ anime.image }}" alt="{{ anime.title }}">
                            <div class="release-info">
                                <div class="release-title">{{ anime.title }}</div>
                                <div class="release-meta">{{ anime.subOrDub|upper }} • {{ anime.type or 'TV' }}</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% else %}
                        {% for i in range(8) %}
                        <a href="#" class="release-item">
                            <img src="https://via.placeholder.com/60x80/1a1a1a/666?text=Anime" alt="Anime">
                            <div class="release-info">
                                <div class="release-title">Anime Title {{ i + 1 }}</div>
                                <div class="release-meta">SUB • TV</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            
            <div class="release-column">
                <h3>Upcoming</h3>
                <div class="release-list">
                    {% if upcoming and upcoming.results %}
                        {% for anime in upcoming.results[0:8] %}
                        <a href="/anime/{{ anime.id }}" class="release-item">
                            <img src="{{ anime.image }}" alt="{{ anime.title }}">
                            <div class="release-info">
                                <div class="release-title">{{ anime.title }}</div>
                                <div class="release-meta">{{ anime.subOrDub|upper }} • {{ anime.type or 'UPCOMING' }}</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% else %}
                        {% for i in range(8) %}
                        <a href="#" class="release-item">
                            <img src="https://via.placeholder.com/60x80/1a1a1a/666?text=Anime" alt="Anime">
                            <div class="release-info">
                                <div class="release-title">Upcoming Anime {{ i + 1 }}</div>
                                <div class="release-meta">UPCOMING • MOVIE</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            
            <div class="release-column">
                <h3>Completed</h3>
                <div class="release-list">
                    {% if latest_completed and latest_completed.results %}
                        {% for anime in latest_completed.results[:8] %}
                        <a href="/anime/{{ anime.id }}" class="release-item">
                            <img src="{{ anime.image }}" alt="{{ anime.title }}">
                            <div class="release-info">
                                <div class="release-title">{{ anime.title }}</div>
                                <div class="release-meta">{{ anime.subOrDub|upper }} • {{ anime.type or 'TV' }}</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% else %}
                        {% for i in range(8) %}
                        <a href="#" class="release-item">
                            <img src="https://via.placeholder.com/60x80/1a1a1a/666?text=Anime" alt="Anime">
                            <div class="release-info">
                                <div class="release-title">Completed Series {{ i + 1 }}</div>
                                <div class="release-meta">SUB • TV</div>
                            </div>
                        </a>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/base.js') }}"></script>
{% endblock %}